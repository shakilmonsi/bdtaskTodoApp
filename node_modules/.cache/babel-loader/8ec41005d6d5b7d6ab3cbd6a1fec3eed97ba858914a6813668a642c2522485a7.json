{"ast":null,"code":"// src/removable.ts\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(this.gcTime || 0, newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3));\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport { Removable };","map":{"version":3,"mappings":";AAAA,SAASA,UAAUC,sBAAsB;AAElC,IAAeC,YAAf,MAAyB;EAE9B;EAEAC,UAAgB;IACd,KAAKC,gBAAe;EACtB;EAEUC,aAAmB;IAC3B,KAAKD,gBAAe;IAEpB,IAAIH,eAAe,KAAKK,MAAM,GAAG;MAC/B,KAAK,aAAaC,WAAW,MAAM;QACjC,KAAKC,gBAAe;MACtB,GAAG,KAAKF,MAAM;IAChB;EACF;EAEUG,aAAaC,WAAqC;IAE1D,KAAKJ,SAASK,KAAKC,IACjB,KAAKN,UAAU,GACfI,cAAcV,WAAWa,WAAW,IAAI,KAAK,KAC/C;EACF;EAEUT,iBAAiB;IACzB,IAAI,KAAK,YAAY;MACnBU,aAAa,KAAK,UAAU;MAC5B,KAAK,aAAa;IACpB;EACF;AAGF","names":["isServer","isValidTimeout","Removable","destroy","clearGcTimeout","scheduleGc","gcTime","setTimeout","optionalRemove","updateGcTime","newGcTime","Math","max","Infinity","clearTimeout"],"sources":["C:\\todoAppMain\\node_modules\\@tanstack\\query-core\\src\\removable.ts"],"sourcesContent":["import { isServer, isValidTimeout } from './utils'\n\nexport abstract class Removable {\n  gcTime!: number\n  #gcTimeout?: ReturnType<typeof setTimeout>\n\n  destroy(): void {\n    this.clearGcTimeout()\n  }\n\n  protected scheduleGc(): void {\n    this.clearGcTimeout()\n\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = setTimeout(() => {\n        this.optionalRemove()\n      }, this.gcTime)\n    }\n  }\n\n  protected updateGcTime(newGcTime: number | undefined): void {\n    // Default to 5 minutes (Infinity for server-side) if no gcTime is set\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1000),\n    )\n  }\n\n  protected clearGcTimeout() {\n    if (this.#gcTimeout) {\n      clearTimeout(this.#gcTimeout)\n      this.#gcTimeout = undefined\n    }\n  }\n\n  protected abstract optionalRemove(): void\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\todoAppMain\\\\src\\\\Pages\\\\DeleteData.jsx\",\n  _s = $RefreshSig$();\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useState } from 'react';\nimport toast from 'react-hot-toast';\nimport Loading from './Loading';\nimport ConfirmationModal from './ConfirmationModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DeleteData = () => {\n  _s();\n  const [deletingDoctor, setDeletingDoctor] = useState(null);\n  const closeModal = () => {\n    setDeletingDoctor(null);\n  };\n  const {\n    data: doctors,\n    isLoading,\n    refetch\n  } = useQuery({\n    queryKey: ['doctors'],\n    queryFn: async () => {\n      try {\n        const res = await fetch('http://localhost:5000/doctors', {\n          headers: {\n            authorization: `bearer ${localStorage.getItem('accessToken')}`\n          }\n        });\n        const data = await res.json();\n        return data;\n      } catch (error) {}\n    }\n  });\n  const handleDeleteDoctor = doctor => {\n    fetch(`http://localhost:5000/doctors/${doctor._id}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: `bearer ${localStorage.getItem('accessToken')}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (data.deletedCount > 0) {\n        refetch();\n        toast.success(`Doctor ${doctor.name} deleted successfully`);\n      }\n    });\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(DeleteData, \"TFvmNuk3wUvukbOHeNq6Qvc3tNg=\", false, function () {\n  return [useQuery];\n});\n_c = DeleteData;\nexport default DeleteData;\nvar _c;\n$RefreshReg$(_c, \"DeleteData\");","map":{"version":3,"names":["useQuery","React","useState","toast","Loading","ConfirmationModal","DeleteData","deletingDoctor","setDeletingDoctor","closeModal","data","doctors","isLoading","refetch","queryKey","queryFn","res","fetch","headers","authorization","localStorage","getItem","json","error","handleDeleteDoctor","doctor","_id","method","then","deletedCount","success","name"],"sources":["C:/todoAppMain/src/Pages/DeleteData.jsx"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\r\nimport React, { useState } from 'react';\r\nimport toast from 'react-hot-toast';\r\nimport Loading from './Loading';\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nconst DeleteData = () => {\r\n    const [deletingDoctor, setDeletingDoctor] = useState(null);\r\n\r\n    const closeModal = () => {\r\n        setDeletingDoctor(null);\r\n    }\r\n\r\n\r\n    const { data: doctors, isLoading, refetch } = useQuery({\r\n        queryKey: ['doctors'],\r\n        queryFn: async () => {\r\n            try {\r\n                const res = await fetch('http://localhost:5000/doctors', {\r\n                    headers: {\r\n                        authorization: `bearer ${localStorage.getItem('accessToken')}`\r\n                    }\r\n                });\r\n                const data = await res.json();\r\n                return data;\r\n            }\r\n            catch (error) {\r\n\r\n            }\r\n        }\r\n    });\r\n\r\n    \r\n    const handleDeleteDoctor = doctor => {\r\n        fetch(`http://localhost:5000/doctors/${doctor._id}`, {\r\n            method: 'DELETE', \r\n            headers: {\r\n                authorization: `bearer ${localStorage.getItem('accessToken')}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(data.deletedCount > 0){\r\n                refetch();\r\n                toast.success(`Doctor ${doctor.name} deleted successfully`)\r\n            }\r\n        })\r\n    }\r\n\r\n    if (isLoading) {\r\n        return <Loading></Loading>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {/* <h2 className=\"text-3xl\">Manage Doctors: {doctors?.length}</h2>\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"table w-full\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th></th>\r\n                            <th>Avatar</th>\r\n                            <th>Name</th>\r\n                            <th>Email</th>\r\n                            <th>Specialty</th>\r\n                            <th>Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            doctors.map((doctor, i) => <tr key={doctor._id}>\r\n                                <th>{i + 1}</th>\r\n                                <td><div className=\"avatar\">\r\n                                    <div className=\"w-24 rounded-full\">\r\n                                        <img src={doctor.image} alt=\"\" />\r\n                                    </div>\r\n                                </div></td>\r\n                                <td>{doctor.name}</td>\r\n                                <td>{doctor.email}</td>\r\n                                <td>{doctor.specialty}</td>\r\n                                <td>\r\n                                    <label onClick={() => setDeletingDoctor(doctor)} htmlFor=\"confirmation-modal\" className=\"btn btn-sm btn-error\">Delete</label>\r\n                                </td>\r\n                            </tr>)\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            {\r\n                deletingDoctor && <ConfirmationModal\r\n                    title={`Are you sure you want to delete?`}\r\n                    message={`If you delete ${deletingDoctor.name}. It cannot be undone.`}\r\n                    successAction = {handleDeleteDoctor}\r\n                    successButtonName=\"Delete\"\r\n                    modalData = {deletingDoctor}\r\n                    closeModal = {closeModal}\r\n                >\r\n                </ConfirmationModal>\r\n            } */}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DeleteData;"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,uBAAuB;AAChD,OAAOC,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,iBAAiB;AACnC,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,iBAAiB,MAAM,qBAAqB;AAAC;AAEpD,MAAMC,UAAU,GAAG,MAAM;EAAA;EACrB,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAE1D,MAAMO,UAAU,GAAG,MAAM;IACrBD,iBAAiB,CAAC,IAAI,CAAC;EAC3B,CAAC;EAGD,MAAM;IAAEE,IAAI,EAAEC,OAAO;IAAEC,SAAS;IAAEC;EAAQ,CAAC,GAAGb,QAAQ,CAAC;IACnDc,QAAQ,EAAE,CAAC,SAAS,CAAC;IACrBC,OAAO,EAAE,YAAY;MACjB,IAAI;QACA,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,+BAA+B,EAAE;UACrDC,OAAO,EAAE;YACLC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAE;UACjE;QACJ,CAAC,CAAC;QACF,MAAMX,IAAI,GAAG,MAAMM,GAAG,CAACM,IAAI,EAAE;QAC7B,OAAOZ,IAAI;MACf,CAAC,CACD,OAAOa,KAAK,EAAE,CAEd;IACJ;EACJ,CAAC,CAAC;EAGF,MAAMC,kBAAkB,GAAGC,MAAM,IAAI;IACjCR,KAAK,CAAE,iCAAgCQ,MAAM,CAACC,GAAI,EAAC,EAAE;MACjDC,MAAM,EAAE,QAAQ;MAChBT,OAAO,EAAE;QACLC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAE;MACjE;IACJ,CAAC,CAAC,CACDO,IAAI,CAACZ,GAAG,IAAIA,GAAG,CAACM,IAAI,EAAE,CAAC,CACvBM,IAAI,CAAClB,IAAI,IAAI;MACV,IAAGA,IAAI,CAACmB,YAAY,GAAG,CAAC,EAAC;QACrBhB,OAAO,EAAE;QACTV,KAAK,CAAC2B,OAAO,CAAE,UAASL,MAAM,CAACM,IAAK,uBAAsB,CAAC;MAC/D;IACJ,CAAC,CAAC;EACN,CAAC;EAED,IAAInB,SAAS,EAAE;IACX,oBAAO,QAAC,OAAO;MAAA;MAAA;MAAA;IAAA,QAAW;EAC9B;EAEA,oBACI;IAAA;IAAA;IAAA;EAAA,QA6CM;AAEd,CAAC;AAAC,GA/FIN,UAAU;EAAA,QAQkCN,QAAQ;AAAA;AAAA,KARpDM,UAAU;AAiGhB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}